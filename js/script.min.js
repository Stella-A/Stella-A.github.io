var ESC_KEYCODE=27,EMPTY_STRING="",addMessageError=function(e){e.classList.remove("modal-error"),e.offsetWidth=e.offsetWidth,e.classList.add("modal-error")},removeMessageError=function(e){e.classList.remove("modal-error")},checkContent=function(e,t){e.value?(removeMessageError(e),localStorage.setItem("name",contactName.value),localStorage.setItem("email",contactEmail.value)):(t.preventDefault(),addMessageError(e))},checkActiveElement=function(e){if(e===document.activeElement)return!0},checkStorageValue=function(e,t){e&&(t.value=e)},resetForm=function(){contactName.value=EMPTY_STRING,contactEmail.value=EMPTY_STRING,contactDescription.value=EMPTY_STRING,removeMessageError(contactName),removeMessageError(contactEmail),removeMessageError(contactDescription)},pressEsc=function(e){e.keyCode===ESC_KEYCODE&&(closePopup(contactPopup,e),closePopup(mapPopup,e))},openPopup=function(e,t){t.preventDefault(),e.classList.add("modal-show"),contactName.focus(),checkStorageValue(storageName,contactName),checkStorageValue(storageEmail,contactEmail)},closePopup=function(e,t){checkActiveElement(contactName)&&checkActiveElement(contactEmail)&&checkActiveElement(contactDescription)||(t.preventDefault(),e.classList.contains("modal-show")&&e.classList.remove("modal-show"),resetForm())};window.addEventListener("keydown",function(e){pressEsc(e)});var contactOpen=document.querySelector(".js-open-contact"),contactPopup=document.querySelector(".modal-contact"),contactClose=contactPopup.querySelector(".modal-close"),contactForm=contactPopup.querySelector(".modal-form"),contactName=contactPopup.querySelector("[name=name]"),contactEmail=contactPopup.querySelector("[name=email]"),contactDescription=contactPopup.querySelector("[name=description]"),storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email");contactOpen.addEventListener("click",function(e){openPopup(contactPopup,e)}),contactClose.addEventListener("click",function(e){closePopup(contactPopup,e)}),contactForm.addEventListener("submit",function(e){checkContent(contactName,e),checkContent(contactEmail,e),checkContent(contactDescription,e)}),contactName.addEventListener("blur",function(e){checkContent(contactName,e)}),contactEmail.addEventListener("blur",function(e){checkContent(contactEmail,e)}),contactDescription.addEventListener("blur",function(e){checkContent(contactDescription,e)});var mapOpen=document.querySelector(".js-open-map"),mapPopup=document.querySelector(".modal-map"),mapClose=mapPopup.querySelector(".modal-close");mapOpen.addEventListener("click",function(e){openPopup(mapPopup,e)}),mapClose.addEventListener("click",function(e){closePopup(mapPopup,e)});